@use 'sass:color';
@use './variables' as v;

/* Text ellipsis */
@mixin text-ellipsis($line: 1) {
  @if $line == 1 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $line;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

@mixin custom-scrollbar($color) {
  &::-webkit-scrollbar {
    width: 6px;
  }

  &::-webkit-scrollbar-track {
    background: rgba($color, 10%);
  }

  &::-webkit-scrollbar-thumb {
    background-color: rgba($color, 40%);
    border-radius: 3px;
  }
}

@mixin glitch-effect($color: v.$color-neon-blue, $color2: v.$color-neon-pink, $color3: v.$color-neon-purple) {
  position: relative;
  animation: glitch-flicker 0.3s infinite linear alternate-reverse;

  &::before,
  &::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    color: $color;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    letter-spacing: inherit;
    text-transform: inherit;
    pointer-events: none;
  }

  &::before {
    left: 2px;
    color: $color2;
    text-shadow: 2px 0 $color3;
    animation: glitch-anim-1 1.5s infinite linear alternate-reverse;
    opacity: 0.7;
  }

  &::after {
    left: -2px;
    color: $color3;
    text-shadow: -2px 0 $color2;
    animation: glitch-anim-2 1.8s infinite linear alternate-reverse;
    opacity: 0.7;
  }
}

@mixin neon-text($color, $intensity: 0.8) {
  color: $color;
  text-shadow: 0 0 5px rgba($color, $intensity);

  /* stylelint-disable-next-line nesting-selector-no-missing-scoping-root */
  &:hover {
    text-shadow: 0 0 10px rgba($color, $intensity + 20%);
  }
}

@mixin scanline($color: rgba(v.$color-neon-blue, 5%), $speed: 4s) {
  position: relative;
  overflow: hidden;

  &::after {
    position: absolute;
    z-index: 1;
    top: 0;
    right: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(
      to bottom,
      transparent 0%,
      $color 50%,
      transparent 100%
    );
    animation: scan $speed linear infinite;
    content: '';
    background-size: 100% 8px;
    pointer-events: none;
  }
}

@mixin pulse($color: v.$color-neon-blue, $size: 10px) {
  animation: pulse-anim 2s infinite;

  /* stylelint-disable-next-line nesting-selector-no-missing-scoping-root */
  &:hover {
    animation: pulse-anim 1s infinite;
  }

  @keyframes pulse-anim {
    0% { box-shadow: 0 0 0 0 rgba($color, 70%); }
    70% { box-shadow: 0 0 0 $size rgba($color, 0); }
    100% { box-shadow: 0 0 0 0 rgba($color, 0); }
  }
}

@mixin gradient-text($gradient: linear-gradient(135deg, v.$color-neon-blue, v.$color-neon-pink)) {
  background: $gradient;
  background-clip: text;
  color: transparent;
}

@mixin neon-button($border-color: v.$color-neon-blue, $hover-color: v.$color-neon-purple) {
  position: relative;
  padding: 0.75rem 2rem;
  border: 2px solid $border-color;
  background: transparent;
  color: $border-color;
  font-family: v.$font-heading;
  font-size: 1rem;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  cursor: pointer;
  transition: all v.$transition-duration v.$transition-easing;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgb(255 255 255 / 20%), transparent);
    transition: left 0.5s;
  }

  &:hover {
    border-color: $hover-color;
    color: $hover-color;
    box-shadow: 0 0 20px rgba($hover-color, 0.5);
    transform: translateY(-2px);

    &::before {
      left: 100%;
    }
  }

  &:active {
    transform: translateY(0);
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
}

@mixin neon-link($link-color: v.$color-neon-blue, $hover-color: v.$color-neon-purple, $glow-color: rgba(v.$color-neon-purple, 0.5)) {
  --neon-link-color: #{$link-color};
  --neon-link-hover-color: #{$hover-color};
  --neon-link-glow-color: #{$glow-color};

  position: relative;
  color: $link-color;
  text-decoration: none;
  font-weight: 600;
  transition: all v.$transition-duration v.$transition-easing;

  &::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: $link-color;
    transition: width v.$transition-duration v.$transition-easing;
  }

  &:hover {
    color: $hover-color;
    text-shadow: 0 0 8px $glow-color;

    &::after {
      width: 100%;
    }
  }
}

